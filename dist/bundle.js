(()=>{"use strict";var t={378:(t,e,i)=>{t.exports=i.p+"c9235a71d1ba488de8ea.jpg"},741:t=>{t.exports=JSON.parse('[[0,0,"cherry"],[0,1,"lemon"],[0,2,"heart"],[0,3,"horsehoe"],[1,0],[1,1],[1,2],[1,3],[2,0],[2,1],[2,2],[2,3],[3,0],[3,1],[3,2],[3,3]]')}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{class t{constructor(){this.gravity=-.0958,this.bounceFactor=.8,this.bouncingSteps=5,this.currentBouncingSteps=0}isActive(){return this.currentBouncingSteps<this.bouncingSteps}next(t){return this.currentBouncingSteps++,-t*this.bounceFactor}bounce(t){return this.currentBouncingSteps<this.bouncingSteps?t+=this.gravity:t=0,t}}function e(t){return t<0?2+t%3:t%2}class s{constructor(t,e,i,...s){this._uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),this._curVelocity=0,this._delta=0,this._options={offsetX:0,maxSpeed:5,acc:.1},this._totalSteps=4,this._curSteps=0,this._isRotating=!1,this._renderIdx=0,this._tiles=s,this._ctx=t.getContext("2d"),this._coords=i,this._options=Object.assign(this._options,e)}start(){this._isRotating=!0,this._curVelocity=0,this.bouncer=new t}stop(){return t=this,e=void 0,s=function*(){return this._isRotating=!1,new Promise((t=>{this.stopResolver=t}))},new((i=void 0)||(i=Promise))((function(n,o){function r(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,c)}a((s=s.apply(t,e||[])).next())}));var t,e,i,s}clampDelta(){var t,i;if(this._delta<0&&!this._isRotating&&(null===(t=this.bouncer)||void 0===t?void 0:t.isActive())&&(this._curVelocity=this.bouncer.next(this._curVelocity)),this._delta>140&&(this._delta=this._delta%140,this._isRotating||this._curSteps++,this._renderIdx=(this._renderIdx+1)%2),!this._isRotating&&!(null===(i=this.bouncer)||void 0===i?void 0:i.isActive())&&this.stopResolver){const t=this._coords[e(1-this._renderIdx)];this.stopResolver(t),this.stopResolver=null,this._delta=0}}update(t){var i;if(!this._tiles)return;const s=t-(null!==(i=this._oldTime)&&void 0!==i?i:t);var n,o;this._oldTime=t,this._delta+=s*this._curVelocity,this.clampDelta(),!this._isRotating&&this._curSteps>=this._totalSteps&&(this._curVelocity=this.bouncer.bounce(this._curVelocity)),this._isRotating&&this._curVelocity<this._options.maxSpeed&&(this._curVelocity=(n=this._curVelocity+this._options.acc,0,o=this._options.maxSpeed,Math.min(Math.max(n,0),o)));for(let t=-1,i=0;i<this._tiles.length;i++){const s=this._coords[e(t+i-this._renderIdx)],n=s[0],o=s[1];this._tiles[i].drawTile(this._ctx,this._options.offsetX,t+i,n,o,this._delta)}}}class n{constructor(t){this._img=t}drawTile(t,e,i,s,n,o){const r=165,c=140,a=r*s,d=c*n;t.drawImage(this._img,a,d,r,c,e*r,i*c+o,r,c)}}function o(t){const e=[...t];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}CanvasRenderingContext2D;const r=i(741).slice(0,2),c=i(378);!function(){const t=document.querySelector("button[id='btn-start']"),e=document.querySelector("button[id='btn-stop']"),i=document.querySelector("canvas[id='game']"),a=i.getContext("2d"),d=new Image;d.src=c;const h=[],u=t=>{a.clearRect(0,0,i.width,i.height),null==h||h.forEach((e=>{e.update(t)})),window.requestAnimationFrame(u)};d.onload=()=>{h.push(new s(i,{acc:.1},o(r),new n(d),new n(d),new n(d),new n(d)),new s(i,{offsetX:1,acc:.05,maxSpeed:4},o(r),new n(d),new n(d),new n(d),new n(d)),new s(i,{offsetX:2,acc:.2,maxSpeed:4.5},o(r),new n(d),new n(d),new n(d),new n(d))),u(0)},t.addEventListener("click",(()=>{null==h||h.forEach((t=>t.start())),e.classList.remove("hidden"),t.classList.add("hidden"),document.querySelector("p[id='success']").classList.add("hidden"),document.querySelector("p[id='error']").classList.add("hidden"),document.querySelector("p[id='success']").classList.add("hidden"),document.querySelector("p[id='error']").classList.add("hidden")})),e.addEventListener("click",(()=>{return i=this,s=void 0,o=function*(){e.classList.add("hidden");const i=[];for(let t=0;t<h.length;t++)i.push(yield h[t].stop());const s=yield Promise.all(i);s.find((t=>s[0][2]!==t[2]))?(document.querySelector("p[id='success']").classList.add("hidden"),document.querySelector("p[id='error']").classList.remove("hidden")):(document.querySelector("p[id='success']").classList.remove("hidden"),document.querySelector("p[id='error']").classList.add("hidden")),t.classList.remove("hidden")},new((n=void 0)||(n=Promise))((function(t,e){function r(t){try{a(o.next(t))}catch(t){e(t)}}function c(t){try{a(o.throw(t))}catch(t){e(t)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,c)}a((o=o.apply(i,s||[])).next())}));var i,s,n,o}))}()})()})();